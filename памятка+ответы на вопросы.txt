–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –≤ Kafka (–≤—Ö–æ–¥–Ω–∞—è –æ—á–µ—Ä–µ–¥—å)
    ‚Üí Go-—Å–µ—Ä–≤–∏—Å –∑–∞–±–∏—Ä–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
    ‚Üí –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç –≤ Redis
    ‚Üí –ò—â–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Redis (–µ—Å–ª–∏ –Ω–µ—Ç ‚Üí –∏–¥–µ—Ç –≤ PostgreSQL)
    ‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
    ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Redis (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
    ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ PostgreSQL (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
    ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Kafka (–≤—ã—Ö–æ–¥–Ω–∞—è –æ—á–µ—Ä–µ–¥—å)

–ü–∞–º—è—Ç–∫–∞ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏
1. –°—Ç–∞—Ä—Ç —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π
–ß–∏—Ç–∞—é —É—Å–ª–æ–≤–∏–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ:

–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è: Url (ID), FetchTime (–≤–µ—Ä—Å–∏—è), PubDate, Text, FirstFetchTime.

–ü—Ä–∞–≤–∏–ª–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö Url:

Text –∏ FetchTime ‚Üí –æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –º–∞–∫—Å. FetchTime.

PubDate ‚Üí –æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –º–∏–Ω. FetchTime.

FirstFetchTime = –º–∏–Ω. FetchTime –≤ –≥—Ä—É–ø–ø–µ.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å: Process(TDocument) *TDocument.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤–æ–∑–º–æ–∂–Ω—ã –¥—É–±–ª–∏ (Url + FetchTime —É–Ω–∏–∫–∞–ª—å–Ω—ã).

–¶–µ–ª—å: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Processor, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏:

–û–ø—Ä–µ–¥–µ–ª—è—é —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: TDocument, Processor.

–í—ã–±–∏—Ä–∞—é —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: in-memory (–ø—Ä–æ—Å—Ç–æ—Ç–∞, —Å–∫–æ—Ä–æ—Å—Ç—å, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏).

–ü—Ä–æ–¥—É–º—ã–≤–∞—é —Å—Ö–µ–º—É –∞–≥—Ä–µ–≥–∞—Ü–∏–∏: –Ω—É–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–∏–Ω./–º–∞–∫—Å. –∑–Ω–∞—á–µ–Ω–∏—è FetchTime –¥–ª—è –∫–∞–∂–¥–æ–≥–æ Url.

2. –ò–¥–µ–∏ –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–í–∞—Ä–∏–∞–Ω—Ç 1: In-Memory (–±—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

–°—Ç—Ä—É–∫—Ç—É—Ä—ã:

go
type TProcessor struct {
    mu        sync.RWMutex
    minData   map[string]struct{ FetchTime, PubDate uint64 } // –ú–∏–Ω–∏–º—É–º—ã –ø–æ Url
    maxData   map[string]struct{ FetchTime uint64; Text string } // –ú–∞–∫—Å–∏–º—É–º—ã –ø–æ Url
}
–õ–æ–≥–∏–∫–∞:

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ Process:

–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ mu.Lock() (–ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å).

–ü—Ä–æ–≤–µ—Ä–∫–∞, –µ—Å—Ç—å –ª–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è Url:

–ù–µ—Ç: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å minData –∏ maxData, –≤–µ—Ä–Ω—É—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å FirstFetchTime = FetchTime.

–ï—Å—Ç—å: —Å—Ä–∞–≤–Ω–∏—Ç—å FetchTime —Å —Ç–µ–∫—É—â–∏–º–∏ –º–∏–Ω./–º–∞–∫—Å.

–ù–æ–≤—ã–π –º–∏–Ω–∏–º—É–º: –æ–±–Ω–æ–≤–∏—Ç—å minData[Url].

–ù–æ–≤—ã–π –º–∞–∫—Å–∏–º—É–º: –æ–±–Ω–æ–≤–∏—Ç—å maxData[Url].

–ò–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç: –≤–µ—Ä–Ω—É—Ç—å nil.

–ï—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí —Å–æ–±—Ä–∞—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ minData –∏ maxData.

–ü–ª—é—Å—ã:

–ü—Ä–æ—Å—Ç–æ—Ç–∞, O(1) –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é.

–ë—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è (< 1 —á–∞—Å–∞).

–ú–∏–Ω—É—Å—ã:

–ù–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (–ø–∞–¥–µ–Ω–∏–µ = –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö).

–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é –ø—Ä–∏ —Ä–æ—Å—Ç–µ —á–∏—Å–ª–∞ URL.

–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ—à–µ–Ω–∏–µ)

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL/Redis.

–°—Ö–µ–º–∞ –¥–ª—è PostgreSQL:

sql
CREATE TABLE documents (
    url TEXT PRIMARY KEY,
    min_fetch_time BIGINT,
    min_pub_date BIGINT,
    max_fetch_time BIGINT,
    max_text TEXT
);
–õ–æ–≥–∏–∫–∞:

UPSERT –ø–æ url —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –º–∏–Ω./–º–∞–∫—Å. –∑–Ω–∞—á–µ–Ω–∏–π.

–í–æ–∑–≤—Ä–∞—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

–ü–ª—é—Å—ã:

–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –ø–∞–¥–µ–Ω–∏—è–º.

–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞).

–ú–∏–Ω—É—Å—ã:

–°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞ 1.5 —á–∞—Å–∞.

–ù—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏.

–í–∞—Ä–∏–∞–Ω—Ç 3: –ì–∏–±—Ä–∏–¥ (–∫–µ—à + –ë–î)

–ò–¥–µ—è: In-memory –∫–µ—à (–Ω–∞–ø—Ä–∏–º–µ—Ä, Redis) + —Ñ–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ë–î.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ Redis:

bash
HSET url1 min_fetch_time 100 min_pub_date 100 max_fetch_time 200 max_text "Text"
–ü–ª—é—Å—ã: –°–∫–æ—Ä–æ—Å—Ç—å + –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å.

–ú–∏–Ω—É—Å—ã: –°–ª–æ–∂–Ω–æ—Å—Ç—å, —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TTL.

3. –û—Ü–µ–Ω–∫–∞ –≤–∞—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è
–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:

–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏: –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–∞–ø—ã –¥–ª—è –º–∏–Ω./–º–∞–∫—Å. –¥–∞–Ω–Ω—ã—Ö.

–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (sync.RWMutex).

–ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã: –ø–æ–∫—Ä—ã—Ç—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–µ–π—Å—ã (–¥—É–±–ª–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∏–Ω./–º–∞–∫—Å.).

–í–æ–∑–≤—Ä–∞—Ç nil –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ –≤ –æ—á–µ—Ä–µ–¥—å.

–†–∏—Å–∫–∏:

–î—É–±–ª–∏–∫–∞—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º FetchTime:

–°–µ–π—á–∞—Å –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è (–≤–µ—Ä–Ω–æ –ø–æ —É—Å–ª–æ–≤–∏—é), –Ω–æ –≤ —Ç–µ—Å—Ç–∞—Ö –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí –û–ö.

–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ PubDate:

–í —Ç–µ—Å—Ç–µ "Older version for URL1" –æ–∂–∏–¥–∞–µ—Ç—Å—è PubDate=50, –Ω–æ –≤ –∫–æ–¥–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–∏–Ω–∏–º—É–º–∞ –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è PubDate. –≠—Ç–æ –≤–µ—Ä–Ω–æ, —Ç.–∫. PubDate –±–µ—Ä–µ—Ç—Å—è –∏–∑ —Å–∞–º–æ–≥–æ —Å—Ç–∞—Ä–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

–ò–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:

–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏:

–•—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ minFetchTime –∏ minPubDate, –∞ –¥–ª—è –º–∞–∫—Å. –¥–∞–Ω–Ω—ã—Ö ‚Äî —Ç–æ–ª—å–∫–æ FetchTime –∏ Text (–∫–∞–∫ —É –≤–∞—Å). –≠—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ.

–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö URL:

–î–æ–±–∞–≤–∏—Ç—å TTL (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ time.Ticker), –µ—Å–ª–∏ –≤ —É—Å–ª–æ–≤–∏–∏ –¥–æ–ø—É—Å—Ç–∏–º–æ.

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫:

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sync.Map –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (–Ω–æ –≤–∞—à RWMutex —É–∂–µ —Ö–æ—Ä–æ—à).

–†–µ–∞–ª–∏–∑—É–µ–º–æ –∑–∞ 1.5 —á–∞—Å–∞?

–î–∞, –µ—Å–ª–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ in-memory. –í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ —É–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è. –¢–µ—Å—Ç—ã + –ª–æ–≥–∏–∫–∞ ‚âà 60-80 –º–∏–Ω—É—Ç.

4. –ö–∞–∫ –æ–±—Å—É–∂–¥–∞—Ç—å —Å –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–æ–º
–®–∞–≥ 1: –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å in-memory —Ä–µ—à–µ–Ω–∏–µ –∫–∞–∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—á–µ–µ:

"–î–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —è –≤—ã–±—Ä–∞–ª in-memory —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é. –û–Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ (O(1) –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é) –∏ –ø—Ä–æ—Å—Ç–∞ –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏–∫–∏. –û–¥–Ω–∞–∫–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ—à–µ–Ω–∏–µ."

–®–∞–≥ 2: –û–±—Å—É–¥–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

–ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞.

–†–µ—à–µ–Ω–∏–µ:

"–í –ø—Ä–æ–¥–∞–∫—à–Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –í–∞—Ä–∏–∞–Ω—Ç—ã:

PostgreSQL: –¢–∞–±–ª–∏—Ü–∞ —Å url –∫–∞–∫ PK, –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –º–∏–Ω./–º–∞–∫—Å. –∑–Ω–∞—á–µ–Ω–∏–π.

Redis: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏, –Ω–æ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞ –¥–∏—Å–∫. –ü—Ä–∏–º–µ—Ä –ø—Å–µ–≤–¥–æ–∫–æ–¥–∞:

go
client.HSet(ctx, url, "min_fetch", doc.FetchTime, "min_pub", doc.PubDate, ...)
–ì–∏–±—Ä–∏–¥: –ö–µ—à –≤ Redis + —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å –≤ PostgreSQL."

–®–∞–≥ 3: –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:

–ü—Ä–æ–±–ª–µ–º–∞: In-memory –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä.

–†–µ—à–µ–Ω–∏–µ:

"–î–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥—ã:

–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ Url (–Ω–∞–ø—Ä–∏–º–µ—Ä, url % N ‚Üí –∏–Ω—Å—Ç–∞–Ω—Å).

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (Redis Lock).

–ï—Å–ª–∏ –∏–Ω—Å—Ç–∞–Ω—Å —É–ø–∞–ª ‚Üí –ø–µ—Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –æ—á–µ—Ä–µ–¥–∏ (Kafka rebalance)."

–®–∞–≥ 4: –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫:

"–†–µ–π—Ç-–ª–∏–º–∏—Ç –Ω–∞ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å go.uber.org/ratelimit.

–û—á–µ—Ä–µ–¥—å —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤–æ—Ä–∫–µ—Ä–∞–º–∏ (worker pool)."

5. –û—Ç–≤–µ—Ç—ã –Ω–∞ –∏–Ω—Å–∞–π–¥—ã –æ—Ç –∫–æ–ª–ª–µ–≥–∏
–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç –Ω–∞ Processor: –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ—Å—Ç—ã –∏–∑ service_test.go.

–ü–∞–¥–µ–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞:

"–î–ª—è in-memory –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è. –†–µ—à–µ–Ω–∏–µ: Redis –∫–∞–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ + AOF (append-only file) –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è."

–ö–ª–∞—Å—Ç–µ—Ä –≤ –∫—É–±–µ—Ä–µ:

"–ï—Å–ª–∏ –∏–Ω—Å—Ç–∞–Ω—Å —É–ø–∞–ª, –∞ –∫–ª–∞—Å—Ç–µ—Ä –Ω–µ –≥–æ—Ç–æ–≤:

–ê–≤—Ç–æ—Ä–µ—Å—Ç–∞—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–†–µ—Ç—Ä–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ (Kafka consumer retry).

–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö: –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∞ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å URL."

–†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ –ø–∞–∫–µ—Ç—ã:

"–Ø —Ä–∞–∑–¥–µ–ª–∏–ª –∫–æ–¥ –Ω–∞:

domain (—Å—Ç—Ä—É–∫—Ç—É—Ä—ã),

repositories (—Ö—Ä–∞–Ω–∏–ª–∏—â–µ),

services (–ª–æ–≥–∏–∫–∞).
DDD –∏–∑–±—ã—Ç–æ—á–µ–Ω, –Ω–æ —Å–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–º–µ–Ω—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞."

–ò—Ç–æ–≥–æ–≤—ã–π –ø–ª–∞–Ω –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏
–ú–∏–Ω—É—Ç 5-10: –ü—Ä–æ—á–∏—Ç–∞—Ç—å —É—Å–ª–æ–≤–∏–µ, —É—Ç–æ—á–Ω–∏—Ç—å –Ω–µ—è—Å–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ª–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å (Url, FetchTime)).

–ú–∏–Ω—É—Ç 40-50: –ù–∞–ø–∏—Å–∞—Ç—å in-memory —Ä–µ—à–µ–Ω–∏–µ (–∫–∞–∫ —É –≤–∞—Å) + –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã.

–ú–∏–Ω—É—Ç 20-30: –û–±—Å—É–¥–∏—Ç—å:

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è in-memory.

–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (PostgreSQL/Redis).

–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å.

–ï—Å–ª–∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤—Ä–µ–º—è: –û–ø–∏—Å–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–∫–µ—à + –ë–î).

–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ –æ—Ç–ª–∏—á–Ω–æ–µ! –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—å –ø—Ä–æ TTL –¥–ª—è —Å—Ç–∞—Ä—ã—Ö URL –∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –£–¥–∞—á–∏! üöÄ